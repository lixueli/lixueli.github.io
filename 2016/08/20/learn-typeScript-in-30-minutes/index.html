<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 30分钟学 TypeScript · Li Xueli Blog</title><meta name="description" content="30分钟学 TypeScript - Li Xueli"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://lixueli.com/atom.xml" title="Li Xueli Blog"><script>(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:2010052,hjsv:6};a=o.getElementsByTagName("head")[0];r=o.createElement("script");r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r)})(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv=");</script></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文章</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/labs/" target="_self" class="nav-list-link">实验室</a></li><li class="nav-list-item"><a href="https://space.bilibili.com/7278038/#/" target="_blank" class="nav-list-link">视频</a></li><li class="nav-list-item"><a href="/contact/" target="_self" class="nav-list-link">联系我</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><div class="toc-tree"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#30分钟学-TypeScript"><span class="toc-text">30分钟学 TypeScript</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#使用-TypeScript-的好处"><span class="toc-text">使用 TypeScript 的好处</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装-TypeScript"><span class="toc-text">安装 TypeScript</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编辑器的-TypeScript-支持"><span class="toc-text">编辑器的 TypeScript 支持</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编译成-JavaScript"><span class="toc-text">编译成 JavaScript</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#静态类型"><span class="toc-text">静态类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#接口"><span class="toc-text">接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#类"><span class="toc-text">类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#泛型"><span class="toc-text">泛型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模块"><span class="toc-text">模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第三方声明文件"><span class="toc-text">第三方声明文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TypeScript-2-0-的新特性"><span class="toc-text">TypeScript 2.0 的新特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#延伸阅读"><span class="toc-text">延伸阅读</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-text">总结</span></a></li></ol></li></ol></div><div class="tag"><a class='tag-link' href='/tags/开发/'>开发</a></div><article class="post-block"><h1 class="post-title">30分钟学 TypeScript</h1><div class="post-info">2016年8月20日</div><div class="post-content"><p>TypeScript 极简入门。</p>
<a id="more"></a>
<p><img src="http://cdn.tutorialzine.com/wp-content/uploads/2016/07/learn-typescript-in-30.png" alt></p>
<p><a href="http://tutorialzine.com/2016/07/learn-typescript-in-30-minutes/" target="_blank" rel="noopener">原创翻译，英文原文地址</a></p>
<h1 id="30分钟学-TypeScript"><a href="#30分钟学-TypeScript" class="headerlink" title="30分钟学 TypeScript"></a>30分钟学 TypeScript</h1><p>今天我们要来看看 TypeScript，一个为构建复杂的大型的应用而设计的需要编译成 JavaScript 的语言。它继承了诸多语言比如 C#、Java 的理念，并且在动态类型的 JavaScript 中加入了更多的约束。</p>
<p>这篇教程针对那些能够相对熟练的使用 JavaScript 但是没怎么用过 TypeScript 的人们。教程包含了 TypeScript 最基础和关键的特性并且配合许多带有注释的例子帮助大家理解这门语言。让我们开始吧！</p>
<h2 id="使用-TypeScript-的好处"><a href="#使用-TypeScript-的好处" class="headerlink" title="使用 TypeScript 的好处"></a>使用 TypeScript 的好处</h2><p>JavaScript 是一门很不错的语言，以至于很多人会想是否真的有必要去学习 TypeScript。技术上，成为一个优秀的开发者不必要使用 TypeScript，很多用不使用它也做得很好。但是，使用 TypeScript 必定会带来一些好处：</p>
<ul>
<li>得益于静态类型，使用 TypeScript 写的代码有更多的可预测性，调试起来也更加方便。</li>
<li>感谢模块、命名空间和强大的面向对象支持，让组织大型复杂的应用代码更加方便。</li>
<li>TypeScript 编译成 JavaScript 时会捕获错误，这样在运行时就不会打断。</li>
<li>即将到来的 Angular 2 框架使用 TypeScript 写的，并且推荐使用 TypeScript。</li>
</ul>
<p>推荐使用 TypeScript 的最后一点也是主要理由是 Angular 2 是当下最火的框架之一，尽管她可以使用普通的 JavaScript 编写，但是大量的教程和例子用的都是 TypeScript，所以越来越多的人会使用 TypeScript。</p>
<h2 id="安装-TypeScript"><a href="#安装-TypeScript" class="headerlink" title="安装 TypeScript"></a>安装 TypeScript</h2><blockquote>
<p>需要先安装 Node.js 和 NPM。如果还没有安装它们，请看<a href="https://docs.npmjs.com/getting-started/installing-node" target="_blank" rel="noopener">这里</a>。</p>
</blockquote>
<p>最简单的安装 TypeScript 的方式是使用 <a href="https://www.npmjs.com/" target="_blank" rel="noopener">NPM</a> 。使用下面的命令，我们可以全局的安装 TypeScript 包，让 TS 编译器在所有项目中都可以使用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure>
<p>打开命令行，在任意地方试着运行 tsc -v 查看有没有正确安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tsc -v</span><br><span class="line">Version 1.8.10</span><br></pre></td></tr></table></figure>
<h2 id="编辑器的-TypeScript-支持"><a href="#编辑器的-TypeScript-支持" class="headerlink" title="编辑器的 TypeScript 支持"></a>编辑器的 TypeScript 支持</h2><p>TypeScript 是一个开源项目，但是是由微软开发和维护的，所以它在微软的 Visual Studio 平台被原生支持。现在，越来越多的编辑器原生支持或通过插件支持 TypeScript 语法，自动完成提示，错误捕捉甚至是内置编译。</p>
<ul>
<li><a href="https://code.visualstudio.com/" target="_blank" rel="noopener">Visual Studio Code</a> - 微软的一款轻量级开源代码编辑器，内置 TypeScript 支持。</li>
<li><a href="https://github.com/Microsoft/TypeScript-Sublime-Plugin" target="_blank" rel="noopener">官方的 Sublime Text 插件</a>。</li>
<li>最新版的 <a href="https://www.jetbrains.com/webstorm/" target="_blank" rel="noopener">WebStorm</a> 内置对 TypeScript 的支持。</li>
<li><a href="https://github.com/Microsoft/TypeScript/wiki/TypeScript-Editor-Support" target="_blank" rel="noopener">更多支持</a> 包括 Vim、Atom、Emacs 以及其他。</li>
</ul>
<h2 id="编译成-JavaScript"><a href="#编译成-JavaScript" class="headerlink" title="编译成 JavaScript"></a>编译成 JavaScript</h2><p>TypeScript 代码写在 .ts 文件中（JSX是 .tsx 文件），不能直接在浏览器中运行，需要编译成普通的 JavaScript 文件。编译过程可以以以下几种方式进行：</p>
<ul>
<li>在命令行中使用前面说的命令行工具 <code>tsc</code>。</li>
<li>直接用 Visual Studio 或者其他的一些 IDEs 和代码编辑器。</li>
<li>使用自动化构建工具如 <a href="http://gulpjs.com/" target="_blank" rel="noopener">gulp</a>。</li>
<li>我们发现第一种方式是最简单、对新手最友好的，所以在这篇教程中我们将使用第一种方式。</li>
</ul>
<p>在下面的命令中一个名为 <em>main.ts</em> 的 TypeScript 文件被编译成了 JavaScript 文件 <em>main.js</em>。如果 <em>main.js</em> 已经存在将会被覆盖。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc main.ts</span><br></pre></td></tr></table></figure>
<p>我们可以一次编译多个文件使用通配符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Will result in separate .js files: main.js worker.js.</span></span><br><span class="line">tsc main.ts worker.ts    </span><br><span class="line"></span><br><span class="line"><span class="comment"># Compiles all .ts files in the current folder. Does NOT work recursively.</span></span><br><span class="line">tsc *.ts</span><br></pre></td></tr></table></figure>
<p>我们可以使用 <code>--watch</code> 选项自动编译当 TypeScript 文件有改变时:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Initializes a watcher process that will keep main.js up to date.</span></span><br><span class="line">tsc main.ts --watch</span><br></pre></td></tr></table></figure>
<p>更多的高级 TypeScript 用户会创建 tsconfig.json 文件，包含了许多的编译设置。配置文件在构架大型项时十分有用，当 .ts 文件很多时，能够自动化程序。在 TypeScript 文档中可以读到<a href="http://www.typescriptlang.org/docs/handbook/tsconfig-json.html" target="_blank" rel="noopener">更多关于 tsconfig.json 的信息</a>。</p>
<h2 id="静态类型"><a href="#静态类型" class="headerlink" title="静态类型"></a>静态类型</h2><p> TypeScript  最大的特点就是支持静态类型。这意味着你可以声明变量的类型，编译器会确保变量没有被赋予错误的类型。如果类型声明被省略，类型会通过代码自动推测出来。</p>
<p> 这里有一个例子。任何变量、函数参数以及返回值可以在初始化的时候定义类型：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> burger: <span class="built_in">string</span> = <span class="string">'hamburger'</span>,     <span class="comment">// String </span></span><br><span class="line">    calories: <span class="built_in">number</span> = <span class="number">300</span>,           <span class="comment">// Numeric</span></span><br><span class="line">    tasty: <span class="built_in">boolean</span> = <span class="literal">true</span>;            <span class="comment">// Boolean</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Alternatively, you can omit the type declaration:</span></span><br><span class="line"><span class="comment">// var burger = 'hamburger';</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The function expects a string and an integer.</span></span><br><span class="line"><span class="comment">// It doesn't return anything so the type of the function itself is void.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params">food: <span class="built_in">string</span>, energy: <span class="built_in">number</span></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Our "</span> + food + <span class="string">" has "</span> + energy + <span class="string">" calories."</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">speak(burger, calories);</span><br></pre></td></tr></table></figure>
<p>因为  TypeScript 会被编译成 JavaScript，JavaScript 并不理解类型的概念，在 JavaScript 中类型会被完全移除：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JavaScript code from the above TS example.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> burger = <span class="string">'hamburger'</span>,</span><br><span class="line">    calories = <span class="number">300</span>, </span><br><span class="line">    tasty = <span class="literal">true</span>; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params">food, energy</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Our "</span> + food + <span class="string">" has "</span> + energy + <span class="string">" calories."</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">speak(burger, calories);</span><br></pre></td></tr></table></figure>
<p>但是如果我们想做一些非法的操作，那么在编译的时候会显示错误。比如：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The given type is boolean, the provided value is a string.</span></span><br><span class="line"><span class="keyword">var</span> tasty: <span class="built_in">boolean</span> = <span class="string">"I haven't tried it yet"</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">main.ts(1,5): error TS2322: Type <span class="string">'string'</span> is not assignable to <span class="built_in">type</span> <span class="string">'boolean'</span>.</span><br></pre></td></tr></table></figure>
<p>如果我们向函数传入错误的参数，也会显示错误：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params">food: <span class="built_in">string</span>, energy: <span class="built_in">number</span></span>): <span class="title">void</span></span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Our "</span> + food + <span class="string">" has "</span> + energy + <span class="string">" calories."</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Arguments don't match the function parameters.</span></span><br><span class="line">speak(<span class="string">"tripple cheesburger"</span>, <span class="string">"a ton of"</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">main.ts(5,30): error TS2345: Argument of <span class="built_in">type</span> <span class="string">'string'</span> is not assignable to parameter of <span class="built_in">type</span> <span class="string">'number'</span>.</span><br></pre></td></tr></table></figure>
<p>下面列出了常用的类型：</p>
<ul>
<li>数字 – All numeric values are represented by the number type, there aren’t separate definitions for integers, floats or others.</li>
<li>字符串 – 就像普通的 JavaScript 中使用 ‘单引号’ 或者 “双引号” 包裹的字符串。</li>
<li>布尔值 – <code>true</code> 或者 <code>false</code>, 使用 0 和 1 会引起编译错误。</li>
<li>任意 – 变量的类型可以是任意一种类型。</li>
<li>数组 – 两种语法： <code>my_arr: number[]</code> 或者 <code>my_arr: Array&lt;number&gt;</code>。</li>
<li>空 – 返回没有返回数。</li>
</ul>
<p>完整的类型列表请参阅 TypeScript 文档 – <a href="http://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" rel="noopener">这里</a>.</p>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>接口用于检查一个对象是否符合一个特定的结构。通过定义一个接口，我们可以命名一个特定的变量的集合，确保这些变量一直会在一起。当编译成 JavaScript 的时候，接口会消失 - 它们的主要在开发阶段带来帮助。</p>
<p>在下面的例子中我们会定义一个简单的接口来检查函数参数的类型：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Here we define our Food interface, its properties, and their types.</span></span><br><span class="line"><span class="keyword">interface</span> Food &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    calories: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// We tell our function to expect an object that fulfills the Food interface. </span></span><br><span class="line"><span class="comment">// This way we know that the properties we need will always be available.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params">food: Food</span>): <span class="title">void</span></span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Our "</span> + food.name + <span class="string">" has "</span> + food.calories + <span class="string">" calories."</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// We define an object that has all of the properties the Food interface expects.</span></span><br><span class="line"><span class="comment">// Notice that types will be inferred automatically.</span></span><br><span class="line"><span class="keyword">var</span> ice_cream = &#123;</span><br><span class="line">  name: <span class="string">"ice cream"</span>, </span><br><span class="line">  calories: <span class="number">200</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">speak(ice_cream);</span><br></pre></td></tr></table></figure>
<p>属性的顺序无关紧要。我们只需要将属性都展现出来并且类型正确。如果缺少了什么、类型错误或是命名不同，编译器都会告诉我们错误。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">interface Food &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    calories: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params">food: Food</span>): <span class="title">void</span></span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Our "</span> + food.name + <span class="string">" has "</span> + food.calories + <span class="string">" grams."</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// We've made a deliberate mistake and name is misspelled as nmae.</span></span><br><span class="line"><span class="keyword">var</span> ice_cream = &#123;</span><br><span class="line">  nmae: <span class="string">"ice cream"</span>, </span><br><span class="line">  calories: <span class="number">200</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">speak(ice_cream);</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">main.ts(16,7): error TS2345: Argument of <span class="built_in">type</span> <span class="string">'&#123; nmae: string; calories: number; &#125; </span></span><br><span class="line"><span class="string">is not assignable to parameter of type '</span>Food<span class="string">'. </span></span><br><span class="line"><span class="string">Property '</span>name<span class="string">' is missing in type '</span>&#123; nmae: string; calories: number; &#125;<span class="string">'.</span></span><br></pre></td></tr></table></figure>
<p>这里是入门指南，我们不会深入接口的更多细节。但是关于接口还有很多在这里没有提到的，所以建议去看看 TypeScript 的文档 – <a href="http://www.typescriptlang.org/docs/handbook/interfaces.html" target="_blank" rel="noopener">这里</a>。</p>
<h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><p>当我们构建大型应用的时候，很多开发者会选择面向对象编程，尤其是像 Java 或是 C#。 TypeScript 提供了与之类似的类系统，包括了继承、抽象类、接口实现、set、get 方法以及其他。</p>
<p>还需要提到的是，自从 JavaScript 最近的升级（ECMAScript 2015），原生的 JavaScript 开始支持类，不通过 TypeScript 也可以使用。这两种实现非常相似，但是它们有缩不同， TypeScript 更加严格。</p>
<p>延续食物的主题，下面是一个简单的 TypeScript 的例子：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Menu &#123;</span><br><span class="line">  <span class="comment">// Our properties:</span></span><br><span class="line">  <span class="comment">// By default they are public, but can also be private or protected.</span></span><br><span class="line">  items: <span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt;;  <span class="comment">// The items in the menu, an array of strings.</span></span><br><span class="line">  pages: <span class="built_in">number</span>;         <span class="comment">// How many pages will the menu be, a number.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// A straightforward constructor. </span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">item_list: <span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt;, total_pages: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="comment">// The this keyword is mandatory.</span></span><br><span class="line">    <span class="keyword">this</span>.items = item_list;    </span><br><span class="line">    <span class="keyword">this</span>.pages = total_pages;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Methods</span></span><br><span class="line">  list(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Our menu for today:"</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="keyword">this</span>.items.length; i++) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.items[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Create a new instance of the Menu class.</span></span><br><span class="line"><span class="keyword">var</span> sundayMenu = <span class="keyword">new</span> Menu([<span class="string">"pancakes"</span>,<span class="string">"waffles"</span>,<span class="string">"orange juice"</span>], <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Call the list method.</span></span><br><span class="line">sundayMenu.list();</span><br></pre></td></tr></table></figure>
<p>任何写过一些 Java 或是 C# 应该感觉这些语法很熟悉，继承也类似：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> HappyMeal <span class="keyword">extends</span> Menu &#123;</span><br><span class="line">  <span class="comment">// Properties are inherited</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// A new constructor has to be defined.</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">item_list: <span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt;, total_pages: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="comment">// In this case we want the exact same constructor as the parent class (Menu), </span></span><br><span class="line">    <span class="comment">// To automatically copy it we can call super() - a reference to the parent's constructor.</span></span><br><span class="line">    <span class="keyword">super</span>(item_list, total_pages);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Just like the properties, methods are inherited from the parent.</span></span><br><span class="line">  <span class="comment">// However, we want to override the list() function so we redefine it.</span></span><br><span class="line">  list(): <span class="built_in">void</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Our special menu for children:"</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="keyword">this</span>.items.length; i++) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.items[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create a new instance of the HappyMeal class.</span></span><br><span class="line"><span class="keyword">var</span> menu_for_children = <span class="keyword">new</span> HappyMeal([<span class="string">"candy"</span>,<span class="string">"drink"</span>,<span class="string">"toy"</span>], <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This time the log message will begin with the special introduction.</span></span><br><span class="line">menu_for_children.list();</span><br></pre></td></tr></table></figure>
<p> TS 中类的更多信息请看文档 – <a href="http://www.typescriptlang.org/docs/handbook/classes.html" target="_blank" rel="noopener">这里</a>。</p>
<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><p>泛型是模板，它允许一个函数接收不同类型的参数。使用泛型创建可重用的组件比 any 类型要好，当变量传入传出时，泛型会保留变量的类型。</p>
<p>下面的例子一个接收一个参数并返回一个含有相同参数的数组。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The &lt;T&gt; after the function name symbolizes that it's a generic function.</span></span><br><span class="line"><span class="comment">// When we call the function, every instance of T will be replaced with the actual provided type.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Receives one argument of type T,</span></span><br><span class="line"><span class="comment">// Returns an array of type T.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">genericFunc</span>&lt;<span class="title">T</span>&gt;(<span class="params">argument: T</span>): <span class="title">T</span>[] </span>&#123;    </span><br><span class="line">  <span class="keyword">var</span> arrayOfT: T[] = [];    <span class="comment">// Create empty array of type T.</span></span><br><span class="line">  arrayOfT.push(argument);   <span class="comment">// Push, now arrayOfT = [argument].</span></span><br><span class="line">  <span class="keyword">return</span> arrayOfT;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arrayFromString = genericFunc&lt;<span class="built_in">string</span>&gt;(<span class="string">"beep"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arrayFromString[<span class="number">0</span>]);         <span class="comment">// "beep"</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> arrayFromString[<span class="number">0</span>])   <span class="comment">// String</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arrayFromNumber = genericFunc(<span class="number">42</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arrayFromNumber[<span class="number">0</span>]);         <span class="comment">// 42</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> arrayFromNumber[<span class="number">0</span>])   <span class="comment">// number</span></span><br></pre></td></tr></table></figure>
<p>第一次调用函数的时候我们手动设置类型为字符串。这不需要编译器知道参数的类型会自动决定合适的类型，就像第二次调用。尽管不是强制的，每一个提供类型是最佳实践，因为编译器可能在复杂的场景中猜测类型时出现错误。</p>
<p>TypeScript 文档包含许多泛型使用的高级用法，包括和接口的一起使用，可以在<a href="http://www.typescriptlang.org/docs/handbook/generics.html" target="_blank" rel="noopener">这里</a>看到。</p>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p>构建大型应用是另一个重要的理念是模块化。把代码分成许多小的可重用的模块可以帮助项目保持组织性和可理解性，比一个一万行的代码要好的多。</p>
<p>TypeScript 介绍了一种导入导出模块的语法，但不用处理文件间的真正的依赖。为了拓展 TS 的模块化，需要依赖第三方库：客户端应用使用 <a href="http://requirejs.org/" target="_blank" rel="noopener">require.js</a>，而 Node.js使用 <a href="https://en.wikipedia.org/wiki/CommonJS" target="_blank" rel="noopener">CommonJS</a>。让我们来看看一个 TypeScript 使用 require.js 的简单例子：</p>
<p>我们将有两个文件。一个导出一个函数，一个导入这个函数并使用它。</p>
<p>exporter.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Hello!"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> = sayHi;</span><br></pre></td></tr></table></figure>
<p>importer.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sayHi = <span class="built_in">require</span>(<span class="string">'./exporter'</span>);</span><br><span class="line">sayHi();</span><br></pre></td></tr></table></figure>
<p>现在需要下载 require.js 并引入（<a href="http://requirejs.org/docs/start.html" target="_blank" rel="noopener">如何使用</a>）。最后一步是编译两个 .ts 文件。一个额外的参数告诉 TypeScript 使用的是 require.js（也被称作 AMD），与之像对应的是 CommonJS。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc --module amd *.ts</span><br></pre></td></tr></table></figure>
<p>Modules are quite complex and are out of the scope of this tutorial. If you want to continue reading about them head out to the TS docs – <a href="http://www.typescriptlang.org/docs/handbook/modules.html" target="_blank" rel="noopener">here</a>.</p>
<p>模块相当的复杂超出了这篇教程的范围。如果你想要继续学习可以查看 TS 的文档 - <a href="http://www.typescriptlang.org/docs/handbook/modules.html" target="_blank" rel="noopener">这里</a>。</p>
<h2 id="第三方声明文件"><a href="#第三方声明文件" class="headerlink" title="第三方声明文件"></a>第三方声明文件</h2><p>当我们使用原本为普通 JavaScript 文件设计的库时，我们需要使用一个声明文件使得库可以在 TypeScript 中使用。声明文件的扩展名是 .d.ts 包含库和 API 的多种信息。</p>
<p>TypeScript 声明文件通常是自己写的，但有很高的可能已经有了 .d.ts 文件已经有其他人完成。 <a href="http://definitelytyped.org/" target="_blank" rel="noopener">DefinitelyTyped</a> 是最大的声明文件的公共仓库，包含超过一千个库。同时还有一个流行的 Node.js 模块去管理 TypeScript 定义：<a href="https://github.com/typings/typings" target="_blank" rel="noopener">Typings</a>。</p>
<p>如果你需要自己编写定义文件，<a href="http://www.typescriptlang.org/docs/handbook/writing-declaration-files.html" target="_blank" rel="noopener">这篇指南</a>会给你帮助。</p>
<h2 id="TypeScript-2-0-的新特性"><a href="#TypeScript-2-0-的新特性" class="headerlink" title="TypeScript 2.0 的新特性"></a>TypeScript 2.0 的新特性</h2><p>下面会介绍一些使用的新特性：</p>
<ul>
<li>Non-nullable 类型防止变量值为 null 或 undefined</li>
<li>声明文件直接通过 NPM 安装</li>
<li>控制流的分析帮助在编译之前发现错误</li>
<li>模块导入导出的演进</li>
</ul>
<p>其他的特性包括在 async/await 中控制异步流，这将会在 2.1 中更新。</p>
<h2 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h2><p>官方文档中的大量内容可能在一开始有点多，但是深入学习时会很有帮助。这篇教程可以作为入门介绍，所以没有包含 TS 的方方面面。这里是一些这篇教程跳过的有用的理念：</p>
<ul>
<li><a href="http://www.typescriptlang.org/docs/handbook/namespaces.html" target="_blank" rel="noopener">命名空间</a></li>
<li><a href="http://www.typescriptlang.org/docs/handbook/enums.html" target="_blank" rel="noopener">枚举</a></li>
<li><a href="http://www.typescriptlang.org/docs/handbook/advanced-types.html" target="_blank" rel="noopener">高级类型和类型指南</a></li>
<li><a href="http://www.typescriptlang.org/docs/handbook/jsx.html" target="_blank" rel="noopener">使用 TypeScript 编写 JSX</a></li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>希望你喜欢这篇教程</p>
<p>现在你会考虑在项目中使用 TypeScript 了吗？</p>
</div></article></div><div class="cc">版权声明：<a href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">非商业性使用-禁止演绎 3.0(CC BY-NC-ND 3.0)</a></div></main><footer><div class="paginator"><a href="/2017/04/19/cs-learning/" class="prev">上一篇</a><a href="/2016/08/13/learn-less-in-10-minutes-or-less-zh-cn/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'lixueli';
var disqus_identifier = '2016/08/20/learn-typeScript-in-30-minutes/';
var disqus_title = '30分钟学 TypeScript';
var disqus_url = 'http://lixueli.com/2016/08/20/learn-typeScript-in-30-minutes/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//lixueli.disqus.com/count.js" async></script><div class="copyright"><p>© 2017 - 2021 <a href="http://lixueli.com">Li Xueli</a>, powered <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/mixj93/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-112756013-1",'auto');ga('send','pageview');</script></body></html>